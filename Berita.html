<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Semua Berita Desa Tegongan</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">

  <div class="max-w-4xl mx-auto py-10">
    <h1 class="text-3xl font-bold text-red-700 mb-6 text-center">Semua Berita</h1>
    <div id="containerBerita" class="space-y-4"></div>
    <div class="text-center mt-6">
      <a href="index.html" 
         class="inline-block px-5 py-2 bg-red-700 text-white rounded-lg text-sm hover:bg-red-800">
        Kembali ke Beranda
      </a>
    </div>
  </div>

  <script>
    // Firebase Config (sama dengan index.html)
    const firebaseConfig = {
      apiKey: "AIzaSyBdAQfJfj27Eww8hR0jM07aPd41nVYJCZs",
      authDomain: "desategongan-web.firebaseapp.com",
      projectId: "desategongan-web",
      storageBucket: "desategongan-web.appspot.com",
      messagingSenderId: "359164423381",
      appId: "1:359164423381:web:fa937b6d3a1616665d065c"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const containerBerita = document.getElementById("containerBerita");

    // Tampilkan semua berita secara real-time
    db.collection("berita").orderBy("tanggal", "desc").onSnapshot((snapshot) => {
      containerBerita.innerHTML = "";
      snapshot.forEach((doc) => {
        const data = doc.data();
        containerBerita.innerHTML += `
          <div class="border p-4 mb-4 rounded shadow bg-white">
            <h3 class="text-red-700 font-bold text-lg">${data.judul}</h3>
            <img src="${data.gambar}" alt="${data.judul}" class="w-full mt-2 rounded">
            <p class="mt-2">${data.isi}</p>
            <small class="text-gray-500">${new Date(data.tanggal.seconds * 1000).toLocaleDateString()}</small>
          </div>
        `;
      });
    });
  </script>

</body>
</html>
